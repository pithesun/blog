<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.4"/><style data-href="/blog/styles.3480c0e6db446f492706.css" data-identity="gatsby-global-css">:root{--primary:#000;--secondary:#fff;--label-large-font-size:21px;--label-large-font-style:normal;--label-large-font-weight:600;--label-large-line-height:140%;--paragraph-medium-font-size:16px;--paragraph-medium-font-style:normal;--paragraph-medium-font-weight:400;--paragraph-medium-line-height:140%}.layout-module--container--78b04{align-items:center;height:87px;justify-content:space-between;padding:0 8px;position:relative}.layout-module--container--78b04,.layout-module--main-container--e0d69{display:flex;font-family:sans-serif;margin:auto;max-width:768px;min-width:320px}.layout-module--main-container--e0d69{flex-direction:column;width:100%}.layout-module--heading--f158c{color:#639}.layout-module--inner--3aa48{align-items:center;align-self:stretch;display:flex;height:87px;justify-content:space-between;padding:0 8px;position:relative;width:100%}.layout-module--nav-links--1113b{color:var(--contentscontentprimary);display:flex;font-family:var(--paragraph-medium-font-family);font-size:var(--paragraph-medium-font-size);font-style:var(--paragraph-medium-font-style);font-weight:var(--paragraph-medium-font-weight);letter-spacing:var(--paragraph-medium-letter-spacing);line-height:var(--paragraph-medium-line-height);list-style:none;padding-left:0;position:relative;white-space:nowrap;width:-moz-fit-content;width:fit-content}.layout-module--nav-link-item--a5f0a{align-items:flex-start;border-bottom:1px solid;border-color:#000;display:inline-flex;flex:0 0 auto;gap:4px;margin-bottom:-1px;margin-left:-1px;margin-top:-1px;padding:4px;position:relative}.layout-module--nav-link-item--a5f0a a{color:inherit;padding:4px;text-decoration:none}.layout-module--nav-link-item--a5f0a a:hover{cursor:pointer}.layout-module--nav-link-text--69cda{color:#000}.layout-module--site-title--e4dea{color:gray;font-size:3rem;font-weight:700;margin:3rem 0}.style-module--article-card--c8491{align-items:flex-start;background-color:var(--secondary);display:flex;flex-direction:column;gap:12px;margin:auto;padding:18px 10px;position:relative}a{color:inherit;text-decoration:none;width:100%}a:hover{cursor:pointer}.style-module--article-card--c8491:hover{background-color:#f5f5f5}.style-module--article-card--c8491 .style-module--text-wrapper--6a0a3{color:var(--primary);font-family:var(--label-large-font-family);font-size:var(--label-large-font-size);font-style:var(--label-large-font-style);font-weight:var(--label-large-font-weight);letter-spacing:var(--label-large-letter-spacing);line-height:var(--label-large-line-height);margin-top:-1px;position:relative;white-space:nowrap;width:-moz-fit-content;width:fit-content}.style-module--article-card--c8491 .style-module--div--687f3{align-self:stretch;color:var(--contentscontentprimary);font-family:var(--paragraph-medium-font-family);font-size:var(--paragraph-medium-font-size);font-style:var(--paragraph-medium-font-style);font-weight:var(--paragraph-medium-font-weight);letter-spacing:var(--paragraph-medium-letter-spacing);line-height:var(--paragraph-medium-line-height);position:relative}.style-module--article-card--c8491 .style-module--buttons-link--908a9{align-items:flex-start;border-bottom:1px solid;border-color:#6b6b6b;display:inline-flex;flex:0 0 auto;gap:4px;margin-bottom:-1px;margin-left:-1px;padding:4px;position:relative}.style-module--article-card--c8491 .style-module--text-wrapper-2--e664f{color:var(--contentscontentprimary);font-family:var(--paragraph-medium-font-family);font-size:var(--paragraph-medium-font-size);font-style:var(--paragraph-medium-font-style);font-weight:var(--paragraph-medium-font-weight);letter-spacing:var(--paragraph-medium-letter-spacing);line-height:var(--paragraph-medium-line-height);position:relative;white-space:nowrap;width:-moz-fit-content;width:fit-content}.style-module--article-set--570f3{align-items:flex-start;display:flex;flex-direction:column;height:458px;position:relative}.style-module--article-set--570f3 .style-module--article-card--17d9d{align-items:flex-start;display:inline-flex;flex:0 0 auto;flex-direction:column;position:relative}.style-module--article-set--570f3 .style-module--div--0fa2e{align-items:flex-start;background-color:var(--secondary);display:flex;flex-direction:column;gap:12px;height:114px;position:relative}.style-module--article-set--570f3 .style-module--text-wrapper--0e28f{color:var(--primary);font-family:var(--label-large-font-family);font-size:var(--label-large-font-size);font-style:var(--label-large-font-style);font-weight:var(--label-large-font-weight);letter-spacing:var(--label-large-letter-spacing);line-height:var(--label-large-line-height);margin-top:-1px;position:relative;white-space:nowrap;width:-moz-fit-content;width:fit-content}.style-module--article-set--570f3 .style-module--text-wrapper-2--b2ab5{align-self:stretch;color:var(--contentscontentprimary);font-family:var(--paragraph-medium-font-family);font-size:var(--paragraph-medium-font-size);font-style:var(--paragraph-medium-font-style);font-weight:var(--paragraph-medium-font-weight);letter-spacing:var(--paragraph-medium-letter-spacing);line-height:var(--paragraph-medium-line-height);position:relative}.style-module--article-set--570f3 .style-module--buttons-link--b8dc1{align-items:flex-start;border-bottom:1px solid;border-color:#6b6b6b;display:inline-flex;flex:0 0 auto;gap:4px;margin-bottom:-1px;margin-left:-1px;padding:4px;position:relative}.style-module--article-set--570f3 .style-module--text-wrapper-3--d67f2{color:var(--contentscontentprimary);font-family:var(--paragraph-medium-font-family);font-size:var(--paragraph-medium-font-size);font-style:var(--paragraph-medium-font-style);font-weight:var(--paragraph-medium-font-weight);letter-spacing:var(--paragraph-medium-letter-spacing);line-height:var(--paragraph-medium-line-height);position:relative;white-space:nowrap;width:-moz-fit-content;width:fit-content}.style-module--article-set--570f3 .style-module--article-card-wrapper--698cf{align-items:flex-start;display:inline-flex;flex:0 0 auto;flex-direction:column;margin-bottom:-106px;position:relative}.style-module--label--172bc{border:2px solid #f5f5f5;border-radius:22px}.style-module--label--172bc,.style-module--label--172bc.style-module--active-state--c1a82{align-items:flex-start;background-color:#fff;box-sizing:border-box;display:inline-flex;gap:8px;position:relative}.style-module--label--172bc.style-module--active-state--c1a82{border:2px solid #f6d38f;border-radius:22px}.style-module--label--172bc .style-module--text-wrapper--f9246{color:var(--primary);font-family:var(--label-medium-font-family);font-size:var(--label-medium-font-size);font-style:var(--label-medium-font-style);font-weight:var(--label-medium-font-weight);letter-spacing:var(--label-medium-letter-spacing);line-height:36px;margin-top:-1px;padding:0 17px;position:relative;white-space:nowrap;width:-moz-fit-content;width:fit-content}.style-module--common-category--a0aa4{align-items:flex-start;display:flex;gap:4px;height:38px;overflow-y:hidden;padding:20px 10px 30px 0;position:relative;width:100%}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-gatsby-head="true">git fetch non-fast-forward update | sunny&#x27;s blog</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header class="layout-module--container--78b04"><a href="/blog/"><img src="/blog/static/sunnypie-b444d7fda826f58d5e1eb9601716e10b.svg"/></a><nav><ul class="layout-module--nav-links--1113b"><li class="layout-module--nav-link-item--a5f0a"><a href="/blog/about/">About</a></li></ul></nav></header><main class="layout-module--main-container--e0d69"><h1 style="margin:0.2em">git fetch non-fast-forward update</h1><p style="margin:0;padding:0 8px;opacity:0.5">2024.06.20</p><p>이번주에 git fetch를 할 때 non-fastforward 하다며 fetch가 reject되었다.
fetch는 무조건 fastforward하다고 생각했기 때문에 당황했다.</p>
<p>몇번이고 기존 로컬 브랜치까지 삭제하고 다시 fetch를 해보고 해당 원격 브랜치로 로컬 브랜치를
새로 만들어보았지만, 자꾸 이전 버전의 브랜치를 가리켰다. 분명히 reference 문제가 맞는데 어떻게 업데이트를 해야할까?
(참고로 기존 remote stg가 삭제되고 master기준으로 새로 stg가 생성된 상태이다.)</p>
<p>해결방법은 <code>.git/config</code> 파일에 fetch 세팅을 해줄 때 &#x27;+refs/heads/mybranch&#x27;를 해준 것이다. +를 붙여줘야한다.</p>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/blog/static/fc12c6a85c344246e39deda11bfddf03/33a7b/gitfetch.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 29.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/0lEQVR42l1Q2XKDMBDj/3+wbbiMwdwQIJDG2Iy6u0mmtA8ayctalggOv+M/bvOIymh0TYW2NmgqQ1wKWHdN+TobDF0t58rkmK89guNwEJwM52mAVjEKnSLPEpRFhoKYtdEKJlfCvMMP81wloTwQ+G2Bv68nQ4tlGmkpRZZGZKblopixUZ6io4sl6UxFtBM+54XCeruS4TLCz8MppZWEBSXgZAxDqKkSMyeqS02cCUqCVKaZfWzvyv5P5WnsEIefUiONL8gpYRp9QZFmvHVCO/ydG8SXD2hqFHCiJ34Nt3Wmn1+gayuMQ4u+rTH0Ddz+gHcWu/2WPf/C4XaZO2fxA6lVwx+ZK6L1AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="아주 정확하게 내 상황에 딱 맞는답을 git 문서에서 찾아볼 수 있었다"
        title=""
        src="/blog/static/fc12c6a85c344246e39deda11bfddf03/5a190/gitfetch.png"
        srcset="/blog/static/fc12c6a85c344246e39deda11bfddf03/772e8/gitfetch.png 200w,
/blog/static/fc12c6a85c344246e39deda11bfddf03/e17e5/gitfetch.png 400w,
/blog/static/fc12c6a85c344246e39deda11bfddf03/5a190/gitfetch.png 800w,
/blog/static/fc12c6a85c344246e39deda11bfddf03/33a7b/gitfetch.png 1119w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<blockquote>
<p>fetch하고 싶은 원격 브랜치가 정기적으로 리베이스 되거나 리와인드 되면,해당 브랜치의 새로운 팁이 이전의 팁의 자식이 아니라는
것을 알 수 있습니다. non-fast-forward 업데이트가 필요하다는 것을 가리키기 위해 몇몇 브랜치에서는 +을 사용하길 원할 것입니다.
어떤 브랜치가 자주 리베이스되거나 리와인드 될지 알 수 없기 때문에, pull 하는 사용자가 스스로 이런 패턴이 브랜치에 예상된다는 것을 알고 있어야합니다.</p>
</blockquote>
<p>그외)
git fetch란
다른 레포의 objecs와 refs를 다운받는 것.</p>
<p>git 문법</p>
<pre><code>git fetch [&lt;options&gt;] [&lt;repository&gt; [&lt;refspec&gt;…​]]
git fetch [&lt;options&gt;] &lt;group&gt;
git fetch --multiple [&lt;options&gt;] [(&lt;repository&gt; | &lt;group&gt;)…​]
git fetch --all [&lt;options&gt;]
</code></pre>
<p>주로 <code>git fetch origin branchname</code>을 주로 쓰는 편이다.
origin -&gt; repository이고 url이 되거나 혹슨 다른 리모트 이름을 쓸 수 있다.
branchname -&gt; branchname:를 생략한 것이다. 따라서 source는 있고 destination이 없는 상태.</p>
<p><code>&lt;refspec&gt;</code>을 생략했기 때문에, (branchname이 모호하기 때문에) config 세팅에서 refspec을 가져온다.
refspec에서 가져온 세팅이 만약 &#x27;refs/heads/mybranch&#x27;라면 &#x27;refs/remotes/origin/mybranch&#x27;가 업데이트 된다.</p>
<p>(기본적으로 Git은 git remote add 명령으로 생성한 설정을 참고하여 리모트 서버에서 refs/heads/ 에 있는 Refs를 가져다 로컬의 refs/remotes/origin/ 에 기록한다.)</p>
<p>참고:</p>
<ol>
<li>https://git-scm.com/docs/git-fetch/</li>
<li>https://stackoverflow.com/questions/50626560/git-fetch-non-fast-forward-update</li>
</ol><div style="display:flex;justify-content:center;max-width:360px;margin:44px 0 0 0"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:596px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;792&#x27;%20width=&#x27;596&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#b8c8c8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/blog/static/b75b03cea772b73c7f2725109f98786b/0966c/coffee.webp 149w,/blog/static/b75b03cea772b73c7f2725109f98786b/d11e7/coffee.webp 298w,/blog/static/b75b03cea772b73c7f2725109f98786b/5551e/coffee.webp 596w" sizes="(min-width: 596px) 596px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="max-width:360px;height:auto;opacity:0" sizes="(min-width: 596px) 596px, 100vw" decoding="async" loading="lazy" data-src="/blog/static/b75b03cea772b73c7f2725109f98786b/3d188/coffee.png" data-srcset="/blog/static/b75b03cea772b73c7f2725109f98786b/eb977/coffee.png 149w,/blog/static/b75b03cea772b73c7f2725109f98786b/8cfc6/coffee.png 298w,/blog/static/b75b03cea772b73c7f2725109f98786b/3d188/coffee.png 596w" alt="coffe"/></picture><noscript><picture><source type="image/webp" srcSet="/blog/static/b75b03cea772b73c7f2725109f98786b/0966c/coffee.webp 149w,/blog/static/b75b03cea772b73c7f2725109f98786b/d11e7/coffee.webp 298w,/blog/static/b75b03cea772b73c7f2725109f98786b/5551e/coffee.webp 596w" sizes="(min-width: 596px) 596px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="max-width:360px;height:auto;opacity:0" sizes="(min-width: 596px) 596px, 100vw" decoding="async" loading="lazy" src="/blog/static/b75b03cea772b73c7f2725109f98786b/3d188/coffee.png" srcSet="/blog/static/b75b03cea772b73c7f2725109f98786b/eb977/coffee.png 149w,/blog/static/b75b03cea772b73c7f2725109f98786b/8cfc6/coffee.png 298w,/blog/static/b75b03cea772b73c7f2725109f98786b/3d188/coffee.png 596w" alt="coffe"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/git-fetch-nonfast-forward/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-e15a52e1526536fd5d68.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-d9e8bfee8e18ec1e762e.js\"],\"component---src-pages-about-js\":[\"/component---src-pages-about-js-37e727a882b3b9f19b95.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-4568008f33cac260995a.js\"],\"component---src-pages-post-mdx-frontmatter-slug-js-content-file-path-blog-functionaschildren-index-mdx\":[\"/component---src-pages-post-mdx-frontmatter-slug-js-content-file-path-blog-functionaschildren-index-mdx-b947db56130094ec3311.js\"],\"component---src-pages-post-mdx-frontmatter-slug-js-content-file-path-blog-gitfetchnonfastforwad-index-mdx\":[\"/component---src-pages-post-mdx-frontmatter-slug-js-content-file-path-blog-gitfetchnonfastforwad-index-mdx-b319f8752adee01bcfb1.js\"],\"component---src-pages-post-mdx-frontmatter-slug-js-content-file-path-blog-myfirsttest-index-mdx\":[\"/component---src-pages-post-mdx-frontmatter-slug-js-content-file-path-blog-myfirsttest-index-mdx-666a2d9f2511ed92b82a.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="3bc6feaa7912fc39098e";</script><script src="/blog/webpack-runtime-12711f09055cfdc03012.js" async></script><script src="/blog/framework-18df94192245b43e9f39.js" async></script><script src="/blog/app-e15a52e1526536fd5d68.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>